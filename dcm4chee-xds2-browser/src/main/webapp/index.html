<!DOCTYPE html>
<html lang="en" ng-app="xdsbrowserApp">
<head>
<meta charset="utf-8">

<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css">
<link rel="stylesheet" href="lib/icons/icomoon.css">

</head>

<script src="lib/jquery.js"></script>
<script src="lib/angular.js"></script>
<script src="lib/angular-route.js"></script>
<script src="lib/angular-strap.js"></script>
<script src="lib/angular-strap.tpl.js"></script>
<script src="lib/angular-animate.js"></script>
<script src="lib/angular-sanitize.js"></script>


<script src="lib/underscore.js"></script>

<script src="js/app.js"></script>
<script src="js/appCommon.js"></script>
<script src="js/browserLinkedView.js"></script>

<script src="js/xdsConstants.js"></script>
<script src="js/xdsQueries.js"></script>
<script src="js/xdsCommon.js"></script>

<script src="js/IdentifiableListCtrl.js"></script>
<script src="js/IdentifiableDetailsCtrl.js"></script>
<script src="js/AdhocQueryUICtrl.js"></script>


<title>xds repo browser</title>
<style type="text/css">
.table.smallprops {
	font-size: 11px;
}

.loading {
	width: 20px;
	height: 20px;
	margin:-5px -5px;	
}

.xds-id-badge {
	margin: 0 10px;
}

.details-header {
	font-size: 150%;
}

</style>
</head>
<body>
	<div class="container" ng-controller="LandingCtrl">


		<div class="row" ng-controller="AdhocQueryUICtrl">

			<h3>XDS Registry browser</h3>
						

			<div class="panel panel-default">
				<div class="panel-body">
					
					<!-- searchbox -->
					<div class="col-md-6">
						<form ng-submit="search()">
							<label> Search (patient id / entry uuid / unique id)</label>
							<div class="input-group">
								 <input 
									class="form-control" 
									ng-model="searchStr"
									ng-options="pid for pid in xdsPatientIds.get()" 
									placeholder="Patient id, UUID, Unique id ...."
									data-min-length="1"
									data-limit = "30"
									bs-typeahead
									
									ng-change = "searchChanged()"
									
									type="text">
								    <span class="input-group-btn">
        								<button id = "searchButton" class="btn btn-default" type="submit">
        								<span ng-hide='isLoading()'>Search</span> 
        								<img ng-show='isLoading()' class='loading' src='img/ajax-loader.gif'>
        								</button>
      								</span>
							</div>
						</form>
					</div>
					
					<!-- By patient id navbar buttons -->
					<div class="col-md-6" ng-show="isSearchPid()">
						<div><label> By patient id </label></div>
						<div class="btn-group">
						<button type="button" class="btn btn-default"
							ng-repeat="(label,name) in entities"
							ng-class="currentEntity==name ? 'active' : ''"
							ng-click="browseEntity(name)">{{label}}</button>

						<button type="button" class="btn btn-default"
							ng-model="currentStatus" data-html="1"
							ng-options="status.urn as status.name for status in xdsConstants.B_Statuses"
							ng-change = "browseEntity(currentEntity)"
							bs-select>
							Status <span class="caret"></span>
						</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="alert alert-danger "
			ng-show="responseStatus && (responseStatus != 200)">Could not
			access the REST server ({{responseStatus}}).</div>

		<div class="alert alert-warning"
			ng-repeat="error in response.registryErrorList.registryError">
			{{error.codeContext}} ({{error.errorCode}})</div>


		<div class="row">
			<div ng-view></div>
		</div>
	</div>

</body>
</html>